<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<style>
			body, table{font-family: 微软雅黑; font-size: 10pt}
			table{border-collapse: collapse; border: 1px solid gray; border-width: 2px 1px 2px 1px;}
			th{border: 1px solid gray; padding: 4px; background-color: #ddd;}
			td{border: 1px solid gray; padding: 4px;}
			tr:nth-child(2n){background-color: #f8f8f8;}
		</style>
	</head>
	<body>
		<div>
			<div>package cn.mldn.lxh.dao.proxy ;
			</div>
			<div>import java.util.* ;
			</div>
			<div>import java.sql.* ;
			</div>
			<div>import cn.mldn.lxh.dao.* ;
			</div>
			<div>import cn.mldn.lxh.dbc.* ;
			</div>
			<div>import cn.mldn.lxh.dao.impl.* ;
			</div>
			<div>import cn.mldn.lxh.vo.* ;
			</div>
			<div><br />
			</div>
			<div>public class EmpDAOProxy implements IEmpDAO {
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; private DatabaseConnection dbc = null ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; private IEmpDAO dao = null ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; public EmpDAOProxy() throws Exception {
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.dbc = new DatabaseConnection() ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.dao = new EmpDAOImpl(this.dbc.getConnection()) ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; public boolean doCreate(Emp emp) throws Exception{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; boolean flag = false ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(this.dao.findById(emp.getEmpno()) == null){
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flag = this.dao.doCreate(emp) ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }catch(Exception e){
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw e ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }finally{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.dbc.close() ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return flag ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; public List&lt;Emp&gt; findAll(String keyWord) throws Exception{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;Emp&gt; all = null ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all = this.dao.findAll(keyWord) ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }catch(Exception e){
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw e ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }finally{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.dbc.close() ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return all ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; public Emp findById(int empno) throws Exception{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Emp emp = null ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; emp = this.dao.findById(empno) ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }catch(Exception e){
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw e ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }finally{
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.dbc.close() ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return emp ;
			</div>
			<div>&nbsp; &nbsp; &nbsp; &nbsp; }
			</div>
			<div>}
			</div>
		</div>
	</body>
</html>